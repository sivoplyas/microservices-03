# Домашнее задание к занятию «Микросервисы: подходы»
## Задача 1: Обеспечить разработку
Т.К. это крупная компания, которая строит систему на основе микросервисной архитектуры, то предложил бы развернуть  GitLab CI/CD  — мощный инструмент, позволяющий на лету внедрять изменения, тестировать и выкатывать продукт.  

- установка возможна на большенства операционных систем. Некоторые поддерживаемые дистрибутивы Linux: Ubuntu, Debian, CentOS, openSUSE, Red Hat Enterprise Linux, Scientific Linux, Oracle Linux.
- возможна установка GitLab на Kubernetes.
- Конвейер определяется в файле .gitlab-ci.yml (build, test, deploy).
- only/except позволяет настраивать фильтры по триггерам.
- Правила предлагают более гибкие условия для выполнения задач по сравнению с only и except.
- Теги используются для определения, какие GitLab Runner'ы (агенты, выполняющие задачи) будут запускать задачи. Это помогает распределять задачи по различным агентам в зависимости от их возможностей.
- Можно использовать переменные окружения. Их можно использовать на каждом этапе пайплайна. За счет переменных можно устанавливать параметры для задач — так становится проще настраивать и управлять конфигурацией.
- Можно использовать Job (Это часть пайплайна, которая дает инструкции к выполнению задач) и Script (Определяет набор команд, выполняющихся в одной задаче).
- поддерживается работа с Environments для безопасного хранения секретных данных (пароли, ключи доступа).

## Задача 2: Логи
Решение для обеспечения сбора и анализа логов сервисов в микросервисной архитектуре может быть основано на базе Elastic Stack (ELK). Оно состоит из Elasticsearch, Logstash, Filebeat и Kibana.
Компоненты решения:
- Filebeat — агент для сбора логов. Устанавливается на каждом хосте для сбора логов и отправки их в центральное хранилище.
- Logstash — платформа для обработки и агрегации логов. Позволяет фильтровать, трансформировать и нормализовать логи перед отправкой в хранилище.
- Elasticsearch — централизованное хранилище и поисковая система. Обеспечивает быстрый доступ к большим объёмам логов и поддерживает сложные запросы для анализа.
- Kibana - система визуализации на основе Elasticsearch. Имеет на своем борту все современные средства анализа данных, а также графические примитивы для их визуализации.

Для гарантии доставки  можно применить брокер сообщений - Apache Kafka.

## Задача 3: Мониторинг

Для обеспечения сбора и анализа состояния хостов и сервисов в микросервисной архитектуре рекомендуется использовать стек Prometheus + Grafana. 
Сбор метрик:
- Prometheus устанавливается в облаке для сбора метрик со всех хостов и сервисов через HTTP.
- Node Exporter устанавливается на каждом хосте для сбора метрик CPU, RAM, HDD, Network.

Хранение и обработка метрик:

- Prometheus сохраняет временные ряды метрик и обеспечивает высокую производительность при запросах. 
- Визуализация и пользовательский интерфейс: Grafana подключается к Prometheus для создания настраиваемых дашбордов, позволяющих агрегировать и визуализировать информацию. 
- Настраиваемые панели: пользователи могут создавать различные панели для отслеживания состояния системы в реальном времени. 
